\doxysection{src/lib/dnode.c File Reference}
\hypertarget{dnode_8c}{}\label{dnode_8c}\index{src/lib/dnode.c@{src/lib/dnode.c}}
{\ttfamily \#include "{}dnode.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{dnode_8c_ad8ed25a114c5a75c9623d17588d858bc}{Impl\+List}} (\mbox{\hyperlink{structDNode}{DNode}})
\item 
\mbox{\hyperlink{structDNodeInfo}{DNode\+Info}} \mbox{\hyperlink{dnode_8c_ad2556f8ef5b57f0dc3c5a5fd567feab2}{DNode\+Info\+\_\+deserialize}} (\mbox{\hyperlink{structBuffer}{Buffer}} buf)
\begin{DoxyCompactList}\small\item\em Deserialize a \doxylink{structBuffer}{Buffer} into a List of \doxylink{structDNodeInfo}{DNode\+Info}\textquotesingle{}s. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structBuffer}{Buffer}} \mbox{\hyperlink{dnode_8c_af421e943d9ef02e0ebb7c027e29521c3}{List\+DNode\+Info\+\_\+serialize}} (List\+DNode\+Info \mbox{\hyperlink{meta-data_8c_a2a9555ea13e6b8fd8495995d9e4504f9}{list}})
\begin{DoxyCompactList}\small\item\em Serialize a List\+DNode\+Info to a buffer. \end{DoxyCompactList}\item 
List\+DNode\+Info \mbox{\hyperlink{dnode_8c_a6885ceb7c1568e67a146199429cee8a1}{List\+DNode\+Info\+\_\+deserialize}} (\mbox{\hyperlink{structBuffer}{Buffer}} buf)
\begin{DoxyCompactList}\small\item\em Deserialize a \doxylink{structBuffer}{Buffer} into a List of \doxylink{structDNodeInfo}{DNode\+Info}\textquotesingle{}s. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structBuffer}{Buffer}} \mbox{\hyperlink{dnode_8c_a03c90bd0be809c5e67fcb43ac06bac44}{DNode\+\_\+serialize}} (\mbox{\hyperlink{structDNode}{DNode}} dnode)
\item 
\mbox{\hyperlink{structDNode}{DNode}} \mbox{\hyperlink{dnode_8c_a1a3a52d615f39272481e72d17955dbd7}{DNode\+\_\+deserialize}} (\mbox{\hyperlink{structBuffer}{Buffer}} buf)
\begin{DoxyCompactList}\small\item\em Deserialize a \doxylink{structBuffer}{Buffer} into a \doxylink{structDNode}{DNode}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structBuffer}{Buffer}} \mbox{\hyperlink{dnode_8c_a3b5d95bdbf39297607b1e2810ebf709a}{List\+DNode\+\_\+serialize}} (List\+DNode \mbox{\hyperlink{meta-data_8c_a2a9555ea13e6b8fd8495995d9e4504f9}{list}})
\begin{DoxyCompactList}\small\item\em Serialize a List of \doxylink{structDNode}{DNode}\textquotesingle{}s into a \doxylink{structBuffer}{Buffer}. \end{DoxyCompactList}\item 
List\+DNode \mbox{\hyperlink{dnode_8c_a3927741f58fb34f545d0f067786f3a61}{List\+DNode\+\_\+deserialize}} (\mbox{\hyperlink{structBuffer}{Buffer}} buf)
\begin{DoxyCompactList}\small\item\em Deserialize a \doxylink{structBuffer}{Buffer} into a List of \doxylink{structDNode}{DNode}\textquotesingle{}s. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{dnode_8c_aacb4971a9663c6bf602f184077214974}{insert\+\_\+into\+\_\+dnode}} (\mbox{\hyperlink{unionIPv4}{IPv4}} address, \mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}} port)
\begin{DoxyCompactList}\small\item\em INSERT into the \doxylink{structDNode}{DNode} table. \end{DoxyCompactList}\item 
List\+DNode \mbox{\hyperlink{dnode_8c_a86907d137461fe03a120c7246e055752}{select\+\_\+from\+\_\+dnode}} (\mbox{\hyperlink{structUUID}{UUID}} \texorpdfstring{$\ast$}{*}nid, \mbox{\hyperlink{unionIPv4}{IPv4}} \texorpdfstring{$\ast$}{*}address, \mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}} \texorpdfstring{$\ast$}{*}port)
\begin{DoxyCompactList}\small\item\em SELECT from the \doxylink{structDNode}{DNode} table. \end{DoxyCompactList}\item 
List\+DNode \mbox{\hyperlink{dnode_8c_a895878e600e0cad456042522d38509a4}{DNode\+\_\+get\+\_\+db}} (void)
\begin{DoxyCompactList}\small\item\em Get the \doxylink{structDNode}{DNode} table from the database. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{dnode_8c_aa56ad7b2df70130079b2027b711a33e9}{DNode\+\_\+set\+\_\+db}} (List\+DNode dnodes)
\begin{DoxyCompactList}\small\item\em Write the database with the List of \doxylink{structDNode}{DNode}\textquotesingle{}s. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{dnode_8c_a510edee6c758326517c0935a47b45fd5}{print\+\_\+dnode}} (\mbox{\hyperlink{structDNode}{DNode}} dnode)
\begin{DoxyCompactList}\small\item\em Print a \doxylink{structDNode}{DNode}\textquotesingle{}s data as a tuple. \end{DoxyCompactList}\item 
List\+DNode\+Info \mbox{\hyperlink{dnode_8c_ab802880fd29ce583effe8bc2874b2d16}{insert}} (List\+DNode\+Info l, \mbox{\hyperlink{structDNodeInfo}{DNode\+Info}} a)
\begin{DoxyCompactList}\small\item\em Insert a \doxylink{structDNodeInfo}{DNode\+Info} into a List\+DNode\+Info in a sorted fashion. \end{DoxyCompactList}\item 
List\+DNode\+Info \mbox{\hyperlink{dnode_8c_a8428c197c7bd2ecebd908cd8b55d3901}{sort}} (List\+DNode\+Info l)
\begin{DoxyCompactList}\small\item\em Sort a List\+DNode\+Info depending on the sequence numbers of its entries. \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{dnode_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{dnode_8c_a1a3a52d615f39272481e72d17955dbd7}\index{dnode.c@{dnode.c}!DNode\_deserialize@{DNode\_deserialize}}
\index{DNode\_deserialize@{DNode\_deserialize}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{DNode\_deserialize()}{DNode\_deserialize()}}
{\footnotesize\ttfamily \label{dnode_8c_a1a3a52d615f39272481e72d17955dbd7} 
\mbox{\hyperlink{structDNode}{DNode}} DNode\+\_\+deserialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structBuffer}{Buffer}}}]{buf}{}\end{DoxyParamCaption})}



Deserialize a \doxylink{structBuffer}{Buffer} into a \doxylink{structDNode}{DNode}. 

Caller must free memory in \doxylink{structDNode_aee65293a83284c36336db34975b011c3}{DNode.\+address}.


\begin{DoxyParams}{Parameters}
{\em buffer} & The \doxylink{structBuffer}{Buffer} you want to deserialize \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The \doxylink{structDNode}{DNode} that the \doxylink{structBuffer}{Buffer} represents 
\end{DoxyReturn}
\Hypertarget{dnode_8c_a895878e600e0cad456042522d38509a4}\index{dnode.c@{dnode.c}!DNode\_get\_db@{DNode\_get\_db}}
\index{DNode\_get\_db@{DNode\_get\_db}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{DNode\_get\_db()}{DNode\_get\_db()}}
{\footnotesize\ttfamily \label{dnode_8c_a895878e600e0cad456042522d38509a4} 
List\+DNode DNode\+\_\+get\+\_\+db (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get the \doxylink{structDNode}{DNode} table from the database. 

\begin{DoxyReturn}{Returns}
a List of \doxylink{structDNode}{DNode}\textquotesingle{}s 
\end{DoxyReturn}
\Hypertarget{dnode_8c_a03c90bd0be809c5e67fcb43ac06bac44}\index{dnode.c@{dnode.c}!DNode\_serialize@{DNode\_serialize}}
\index{DNode\_serialize@{DNode\_serialize}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{DNode\_serialize()}{DNode\_serialize()}}
{\footnotesize\ttfamily \label{dnode_8c_a03c90bd0be809c5e67fcb43ac06bac44} 
\mbox{\hyperlink{structBuffer}{Buffer}} DNode\+\_\+serialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structDNode}{DNode}}}]{dnode}{}\end{DoxyParamCaption})}

\Hypertarget{dnode_8c_aa56ad7b2df70130079b2027b711a33e9}\index{dnode.c@{dnode.c}!DNode\_set\_db@{DNode\_set\_db}}
\index{DNode\_set\_db@{DNode\_set\_db}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{DNode\_set\_db()}{DNode\_set\_db()}}
{\footnotesize\ttfamily \label{dnode_8c_aa56ad7b2df70130079b2027b711a33e9} 
void DNode\+\_\+set\+\_\+db (\begin{DoxyParamCaption}\item[{List\+DNode}]{dnodes}{}\end{DoxyParamCaption})}



Write the database with the List of \doxylink{structDNode}{DNode}\textquotesingle{}s. 

\Hypertarget{dnode_8c_ad2556f8ef5b57f0dc3c5a5fd567feab2}\index{dnode.c@{dnode.c}!DNodeInfo\_deserialize@{DNodeInfo\_deserialize}}
\index{DNodeInfo\_deserialize@{DNodeInfo\_deserialize}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{DNodeInfo\_deserialize()}{DNodeInfo\_deserialize()}}
{\footnotesize\ttfamily \label{dnode_8c_ad2556f8ef5b57f0dc3c5a5fd567feab2} 
\mbox{\hyperlink{structDNodeInfo}{DNode\+Info}} DNode\+Info\+\_\+deserialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structBuffer}{Buffer}}}]{buf}{}\end{DoxyParamCaption})}



Deserialize a \doxylink{structBuffer}{Buffer} into a List of \doxylink{structDNodeInfo}{DNode\+Info}\textquotesingle{}s. 

Caller must free memory in DNode\+Info.\+address.


\begin{DoxyParams}{Parameters}
{\em buffer} & The \doxylink{structBuffer}{Buffer} you want to deserialize \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The List of \doxylink{structDNodeInfo}{DNode\+Info}\textquotesingle{}s that the \doxylink{structBuffer}{Buffer} represents 
\end{DoxyReturn}
\Hypertarget{dnode_8c_ad8ed25a114c5a75c9623d17588d858bc}\index{dnode.c@{dnode.c}!ImplList@{ImplList}}
\index{ImplList@{ImplList}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{ImplList()}{ImplList()}}
{\footnotesize\ttfamily \label{dnode_8c_ad8ed25a114c5a75c9623d17588d858bc} 
Impl\+List (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structDNode}{DNode}}}]{}{}\end{DoxyParamCaption})}

\Hypertarget{dnode_8c_ab802880fd29ce583effe8bc2874b2d16}\index{dnode.c@{dnode.c}!insert@{insert}}
\index{insert@{insert}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{insert()}{insert()}}
{\footnotesize\ttfamily \label{dnode_8c_ab802880fd29ce583effe8bc2874b2d16} 
List\+DNode\+Info insert (\begin{DoxyParamCaption}\item[{List\+DNode\+Info}]{l}{, }\item[{\mbox{\hyperlink{structDNodeInfo}{DNode\+Info}}}]{a}{}\end{DoxyParamCaption})}



Insert a \doxylink{structDNodeInfo}{DNode\+Info} into a List\+DNode\+Info in a sorted fashion. 

This is really just a helper function for \doxylink{dnode_8h_a8428c197c7bd2ecebd908cd8b55d3901}{sort(\+List\+DNode\+Info l)}. Here is a Haskell implementation of it\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{insert\ ::\ [Int]\ -\/>\ Int\ -\/>\ [Int]}
\DoxyCodeLine{insert\ []\ a\ =\ [a]}
\DoxyCodeLine{insert\ (x:xs)\ a\ =\ if\ x\ >\ a\ then\ a:x:xs\ else\ x:insert\ xs\ a}

\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em l} & the List\+DNode\+Info that you want to insert into \\
\hline
{\em a} & the \doxylink{structDNodeInfo}{DNode\+Info} that you want to insert \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a List\+DNode\+Info with a placed depending on its sequence number 
\end{DoxyReturn}
\Hypertarget{dnode_8c_aacb4971a9663c6bf602f184077214974}\index{dnode.c@{dnode.c}!insert\_into\_dnode@{insert\_into\_dnode}}
\index{insert\_into\_dnode@{insert\_into\_dnode}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{insert\_into\_dnode()}{insert\_into\_dnode()}}
{\footnotesize\ttfamily \label{dnode_8c_aacb4971a9663c6bf602f184077214974} 
void insert\+\_\+into\+\_\+dnode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{unionIPv4}{IPv4}}}]{address}{, }\item[{\mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}}}]{port}{}\end{DoxyParamCaption})}



INSERT into the \doxylink{structDNode}{DNode} table. 


\begin{DoxyParams}{Parameters}
{\em address} & the URI address \\
\hline
{\em port} & the port of the connection \\
\hline
\end{DoxyParams}
\Hypertarget{dnode_8c_a3927741f58fb34f545d0f067786f3a61}\index{dnode.c@{dnode.c}!ListDNode\_deserialize@{ListDNode\_deserialize}}
\index{ListDNode\_deserialize@{ListDNode\_deserialize}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{ListDNode\_deserialize()}{ListDNode\_deserialize()}}
{\footnotesize\ttfamily \label{dnode_8c_a3927741f58fb34f545d0f067786f3a61} 
List\+DNode List\+DNode\+\_\+deserialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structBuffer}{Buffer}}}]{buf}{}\end{DoxyParamCaption})}



Deserialize a \doxylink{structBuffer}{Buffer} into a List of \doxylink{structDNode}{DNode}\textquotesingle{}s. 

Caller must free memory in \doxylink{structDNode_aee65293a83284c36336db34975b011c3}{DNode.\+address}.


\begin{DoxyParams}{Parameters}
{\em buffer} & The \doxylink{structBuffer}{Buffer} you want to deserialize \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The List of \doxylink{structDNode}{DNode}\textquotesingle{}s that the \doxylink{structBuffer}{Buffer} represents 
\end{DoxyReturn}
\Hypertarget{dnode_8c_a3b5d95bdbf39297607b1e2810ebf709a}\index{dnode.c@{dnode.c}!ListDNode\_serialize@{ListDNode\_serialize}}
\index{ListDNode\_serialize@{ListDNode\_serialize}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{ListDNode\_serialize()}{ListDNode\_serialize()}}
{\footnotesize\ttfamily \label{dnode_8c_a3b5d95bdbf39297607b1e2810ebf709a} 
\mbox{\hyperlink{structBuffer}{Buffer}} List\+DNode\+\_\+serialize (\begin{DoxyParamCaption}\item[{List\+DNode}]{list}{}\end{DoxyParamCaption})}



Serialize a List of \doxylink{structDNode}{DNode}\textquotesingle{}s into a \doxylink{structBuffer}{Buffer}. 

Caller must free memory in \doxylink{structBuffer_a4ff8cd56bcbabbe3f65391f83d2c871a}{Buffer.\+buf}.


\begin{DoxyParams}{Parameters}
{\em list} & the List of \doxylink{structDNode}{DNode}\textquotesingle{}s that you want to serialize \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the \doxylink{structBuffer}{Buffer} that the List\+DNode represents 
\end{DoxyReturn}
\Hypertarget{dnode_8c_a6885ceb7c1568e67a146199429cee8a1}\index{dnode.c@{dnode.c}!ListDNodeInfo\_deserialize@{ListDNodeInfo\_deserialize}}
\index{ListDNodeInfo\_deserialize@{ListDNodeInfo\_deserialize}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{ListDNodeInfo\_deserialize()}{ListDNodeInfo\_deserialize()}}
{\footnotesize\ttfamily \label{dnode_8c_a6885ceb7c1568e67a146199429cee8a1} 
List\+DNode\+Info List\+DNode\+Info\+\_\+deserialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structBuffer}{Buffer}}}]{buf}{}\end{DoxyParamCaption})}



Deserialize a \doxylink{structBuffer}{Buffer} into a List of \doxylink{structDNodeInfo}{DNode\+Info}\textquotesingle{}s. 

Caller must free memory in DNode\+Info.\+address.


\begin{DoxyParams}{Parameters}
{\em buffer} & The \doxylink{structBuffer}{Buffer} you want to deserialize \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The List of \doxylink{structDNodeInfo}{DNode\+Info}\textquotesingle{}s that the \doxylink{structBuffer}{Buffer} represents 
\end{DoxyReturn}
\Hypertarget{dnode_8c_af421e943d9ef02e0ebb7c027e29521c3}\index{dnode.c@{dnode.c}!ListDNodeInfo\_serialize@{ListDNodeInfo\_serialize}}
\index{ListDNodeInfo\_serialize@{ListDNodeInfo\_serialize}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{ListDNodeInfo\_serialize()}{ListDNodeInfo\_serialize()}}
{\footnotesize\ttfamily \label{dnode_8c_af421e943d9ef02e0ebb7c027e29521c3} 
\mbox{\hyperlink{structBuffer}{Buffer}} List\+DNode\+Info\+\_\+serialize (\begin{DoxyParamCaption}\item[{List\+DNode\+Info}]{list}{}\end{DoxyParamCaption})}



Serialize a List\+DNode\+Info to a buffer. 


\begin{DoxyParams}{Parameters}
{\em dinfo} & the List\+DNode\+Info you want to serialize \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the \doxylink{structBuffer}{Buffer} thet tha List\+DNode\+Info represents 
\end{DoxyReturn}
\Hypertarget{dnode_8c_a510edee6c758326517c0935a47b45fd5}\index{dnode.c@{dnode.c}!print\_dnode@{print\_dnode}}
\index{print\_dnode@{print\_dnode}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{print\_dnode()}{print\_dnode()}}
{\footnotesize\ttfamily \label{dnode_8c_a510edee6c758326517c0935a47b45fd5} 
void print\+\_\+dnode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structDNode}{DNode}}}]{dnode}{}\end{DoxyParamCaption})}



Print a \doxylink{structDNode}{DNode}\textquotesingle{}s data as a tuple. 


\begin{DoxyParams}{Parameters}
{\em dnode} & the \doxylink{structDNode}{DNode} to be printed \\
\hline
\end{DoxyParams}
\Hypertarget{dnode_8c_a86907d137461fe03a120c7246e055752}\index{dnode.c@{dnode.c}!select\_from\_dnode@{select\_from\_dnode}}
\index{select\_from\_dnode@{select\_from\_dnode}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{select\_from\_dnode()}{select\_from\_dnode()}}
{\footnotesize\ttfamily \label{dnode_8c_a86907d137461fe03a120c7246e055752} 
List\+DNode select\+\_\+from\+\_\+dnode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structUUID}{UUID}} \texorpdfstring{$\ast$}{*}}]{nid}{, }\item[{\mbox{\hyperlink{unionIPv4}{IPv4}} \texorpdfstring{$\ast$}{*}}]{address}{, }\item[{\mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}} \texorpdfstring{$\ast$}{*}}]{port}{}\end{DoxyParamCaption})}



SELECT from the \doxylink{structDNode}{DNode} table. 


\begin{DoxyParams}{Parameters}
{\em nid} & the \doxylink{structDNode}{DNode}\textquotesingle{}s ID or NULL \\
\hline
{\em address} & the host\textquotesingle{}s address or PULL \\
\hline
{\em port} & the host\textquotesingle{}s \doxylink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port} or NULL \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a List\+DNode of the possible matches 
\end{DoxyReturn}
\Hypertarget{dnode_8c_a8428c197c7bd2ecebd908cd8b55d3901}\index{dnode.c@{dnode.c}!sort@{sort}}
\index{sort@{sort}!dnode.c@{dnode.c}}
\doxysubsubsection{\texorpdfstring{sort()}{sort()}}
{\footnotesize\ttfamily \label{dnode_8c_a8428c197c7bd2ecebd908cd8b55d3901} 
List\+DNode\+Info sort (\begin{DoxyParamCaption}\item[{List\+DNode\+Info}]{l}{}\end{DoxyParamCaption})}



Sort a List\+DNode\+Info depending on the sequence numbers of its entries. 


\begin{DoxyCode}{0}
\DoxyCodeLine{sort\ ::\ [Int]\ -\/>\ [Int]}
\DoxyCodeLine{sort\ =\ foldl\ insert\ []}

\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em l} & the List\+DNode\+Info you want to sort \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a sorted version of l 
\end{DoxyReturn}
