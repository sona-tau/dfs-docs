\doxysection{src/testdb.c File Reference}
\hypertarget{testdb_8c}{}\label{testdb_8c}\index{src/testdb.c@{src/testdb.c}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include "{}lib/uuid.\+h"{}}\newline
{\ttfamily \#include "{}lib/dnode.\+h"{}}\newline
{\ttfamily \#include "{}lib/inode.\+h"{}}\newline
{\ttfamily \#include "{}lib/block.\+h"{}}\newline
{\ttfamily \#include "{}lib/log.\+h"{}}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structBlockAssoc}{Block\+Assoc}}
\begin{DoxyCompactList}\small\item\em Dummy data structure for database testing. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structBlockLocation}{Block\+Location}}
\begin{DoxyCompactList}\small\item\em Dummy datastructure for database testing. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
List\+DNode \mbox{\hyperlink{testdb_8c_ade5811df79800cd157d0e66c9776faa7}{add\+\_\+data\+\_\+node}} (\mbox{\hyperlink{unionIPv4}{IPv4}} address, \mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}} port)
\begin{DoxyCompactList}\small\item\em Adds new data node to the metadata server Receives IP address and port I.\+E. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structDNode}{DNode}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{testdb_8c_a0489fb0f48d9a950b45c6bf98325e735}{check\+\_\+node}} (\mbox{\hyperlink{unionIPv4}{IPv4}} address, \mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}} port)
\begin{DoxyCompactList}\small\item\em Check if node is in database and returns name, address, port for connection. \end{DoxyCompactList}\item 
List\+INode \mbox{\hyperlink{testdb_8c_a8a01ff0f021a126def8986a1233a0923}{insert\+\_\+file}} (\mbox{\hyperlink{structSafeStr}{Safe\+Str}} fname, size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Create the inode attributes. For this project the name of the file and its size. \end{DoxyCompactList}\item 
List\+INode \mbox{\hyperlink{testdb_8c_afc24cee6d8fd019eef2f45d127d8d32a}{get\+\_\+files}} (void)
\begin{DoxyCompactList}\small\item\em Returns the attributes of the files stored in the DFS\+: File Name and Size. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structINode}{INode}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{testdb_8c_a0045884bcffca98391bbfa8a6d88d305}{get\+\_\+file\+\_\+info}} (\mbox{\hyperlink{structSafeStr}{Safe\+Str}} fname)
\begin{DoxyCompactList}\small\item\em Given a filename, if the file is stored in DFS return its filename id and fsize. \end{DoxyCompactList}\item 
\mbox{\hyperlink{testdb_8c_a9c646fe56abf750b7574f6f861831ab2}{Def\+List}} (\mbox{\hyperlink{structBlockAssoc}{Block\+Assoc}})
\item 
\mbox{\hyperlink{testdb_8c_a02a1b913325775b921a2ebb3b6597c41}{Def\+List}} (\mbox{\hyperlink{structBlockLocation}{Block\+Location}})
\item 
\mbox{\hyperlink{testdb_8c_a9de1ed0eba32111aa2d883ce05ff5571}{Block\+Location\+Info}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{testdb_8c_a6304c12b8be4f61ef93aef856a9ba7cf}{get\+\_\+file\+\_\+inode}} (\mbox{\hyperlink{structSafeStr}{Safe\+Str}} fname)
\begin{DoxyCompactList}\small\item\em Possibly gets the location information of a file. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{testdb_8c_a840291bc02cba5474a4cb46a9b9566fe}{main}} (void)
\begin{DoxyCompactList}\small\item\em This will test the database. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{testdb_8c_a9de1ed0eba32111aa2d883ce05ff5571}{Block\+Location\+Info}}
\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{testdb_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{testdb_8c_ade5811df79800cd157d0e66c9776faa7}\index{testdb.c@{testdb.c}!add\_data\_node@{add\_data\_node}}
\index{add\_data\_node@{add\_data\_node}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{add\_data\_node()}{add\_data\_node()}}
{\footnotesize\ttfamily \label{testdb_8c_ade5811df79800cd157d0e66c9776faa7} 
List\+DNode add\+\_\+data\+\_\+node (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{unionIPv4}{IPv4}}}]{address}{, }\item[{\mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}}}]{port}{}\end{DoxyParamCaption})}



Adds new data node to the metadata server Receives IP address and port I.\+E. 

the information to connect to the data node return self.\+c.\+lastrowid. \Hypertarget{testdb_8c_a0489fb0f48d9a950b45c6bf98325e735}\index{testdb.c@{testdb.c}!check\_node@{check\_node}}
\index{check\_node@{check\_node}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{check\_node()}{check\_node()}}
{\footnotesize\ttfamily \label{testdb_8c_a0489fb0f48d9a950b45c6bf98325e735} 
\mbox{\hyperlink{structDNode}{DNode}} \texorpdfstring{$\ast$}{*} check\+\_\+node (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{unionIPv4}{IPv4}}}]{address}{, }\item[{\mbox{\hyperlink{enchufe_8h_aebfc8a43171a8d87a23423fb4725bea4}{Port}}}]{port}{}\end{DoxyParamCaption})}



Check if node is in database and returns name, address, port for connection. 

\Hypertarget{testdb_8c_a9c646fe56abf750b7574f6f861831ab2}\index{testdb.c@{testdb.c}!DefList@{DefList}}
\index{DefList@{DefList}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{DefList()}{DefList()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{testdb_8c_a9c646fe56abf750b7574f6f861831ab2} 
Def\+List (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structBlockAssoc}{Block\+Assoc}}}]{}{}\end{DoxyParamCaption})}

\Hypertarget{testdb_8c_a02a1b913325775b921a2ebb3b6597c41}\index{testdb.c@{testdb.c}!DefList@{DefList}}
\index{DefList@{DefList}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{DefList()}{DefList()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{testdb_8c_a02a1b913325775b921a2ebb3b6597c41} 
Def\+List (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structBlockLocation}{Block\+Location}}}]{}{}\end{DoxyParamCaption})}

\Hypertarget{testdb_8c_a0045884bcffca98391bbfa8a6d88d305}\index{testdb.c@{testdb.c}!get\_file\_info@{get\_file\_info}}
\index{get\_file\_info@{get\_file\_info}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{get\_file\_info()}{get\_file\_info()}}
{\footnotesize\ttfamily \label{testdb_8c_a0045884bcffca98391bbfa8a6d88d305} 
\mbox{\hyperlink{structINode}{INode}} \texorpdfstring{$\ast$}{*} get\+\_\+file\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structSafeStr}{Safe\+Str}}}]{fname}{}\end{DoxyParamCaption})}



Given a filename, if the file is stored in DFS return its filename id and fsize. 

Internal use only. Does not have to be accessed from the metadata server. \Hypertarget{testdb_8c_a6304c12b8be4f61ef93aef856a9ba7cf}\index{testdb.c@{testdb.c}!get\_file\_inode@{get\_file\_inode}}
\index{get\_file\_inode@{get\_file\_inode}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{get\_file\_inode()}{get\_file\_inode()}}
{\footnotesize\ttfamily \label{testdb_8c_a6304c12b8be4f61ef93aef856a9ba7cf} 
\mbox{\hyperlink{testdb_8c_a9de1ed0eba32111aa2d883ce05ff5571}{Block\+Location\+Info}} \texorpdfstring{$\ast$}{*} get\+\_\+file\+\_\+inode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structSafeStr}{Safe\+Str}}}]{fname}{}\end{DoxyParamCaption})}



Possibly gets the location information of a file. 

\Hypertarget{testdb_8c_afc24cee6d8fd019eef2f45d127d8d32a}\index{testdb.c@{testdb.c}!get\_files@{get\_files}}
\index{get\_files@{get\_files}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{get\_files()}{get\_files()}}
{\footnotesize\ttfamily \label{testdb_8c_afc24cee6d8fd019eef2f45d127d8d32a} 
List\+INode get\+\_\+files (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Returns the attributes of the files stored in the DFS\+: File Name and Size. 

\Hypertarget{testdb_8c_a8a01ff0f021a126def8986a1233a0923}\index{testdb.c@{testdb.c}!insert\_file@{insert\_file}}
\index{insert\_file@{insert\_file}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{insert\_file()}{insert\_file()}}
{\footnotesize\ttfamily \label{testdb_8c_a8a01ff0f021a126def8986a1233a0923} 
List\+INode insert\+\_\+file (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structSafeStr}{Safe\+Str}}}]{fname}{, }\item[{size\+\_\+t}]{size}{}\end{DoxyParamCaption})}



Create the inode attributes. For this project the name of the file and its size. 

\Hypertarget{testdb_8c_a840291bc02cba5474a4cb46a9b9566fe}\index{testdb.c@{testdb.c}!main@{main}}
\index{main@{main}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{testdb_8c_a840291bc02cba5474a4cb46a9b9566fe} 
int main (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



This will test the database. 



\label{doc-var-members}
\Hypertarget{testdb_8c_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{testdb_8c_a9de1ed0eba32111aa2d883ce05ff5571}\index{testdb.c@{testdb.c}!BlockLocationInfo@{BlockLocationInfo}}
\index{BlockLocationInfo@{BlockLocationInfo}!testdb.c@{testdb.c}}
\doxysubsubsection{\texorpdfstring{BlockLocationInfo}{BlockLocationInfo}}
{\footnotesize\ttfamily \label{testdb_8c_a9de1ed0eba32111aa2d883ce05ff5571} 
Block\+Location\+Info}

